#!/bin/bash
# Returns current timestamp in local timezone
# Usage: ./tools/now
#
# Created because Claude Code cannot learn permission patterns for date commands.
# Each variation (date, TZ='...' date, date +%Y-%m-%d, etc.) requires separate approval.
# This single script provides a consistent, pre-approved way to get timestamps.


# Tool version

# Source log helper for telemetry
SCRIPT_DIR="${SCRIPT_DIR:-$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)}"
if [[ -f "$SCRIPT_DIR/_log-helper" ]]; then
    source "$SCRIPT_DIR/_log-helper"
fi
RUN_ID=$(log_start "now" "agency-tool" "$@" 2>/dev/null) || true
TOOL_VERSION="1.0.0-20260109-000001"

# Version check
if [[ "${1:-}" == "--version" || "${1:-}" == "-v" ]]; then
    echo "now $TOOL_VERSION"
    exit 0
fi

date "+%Y-%m-%d %H:%M:%S %Z"
