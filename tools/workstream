#!/bin/bash
# Returns the current agent's workstream
#
# This provides a consistent, pre-approved way to check workstream identity.
# When asked "What is your workstream?" or "Who are you?", use this script.
#
# Usage:
#   ./tools/workstream
#   WORKSTREAM=$(./tools/workstream)
#

# Source log helper for telemetry
SCRIPT_DIR="${SCRIPT_DIR:-$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)}"
if [[ -f "$SCRIPT_DIR/_log-helper" ]]; then
    source "$SCRIPT_DIR/_log-helper"
fi
RUN_ID=$(log_start "workstream" "agency-tool" "$@" 2>/dev/null) || true
# Created because agents need a standardized way to identify their workstream
# without permission friction from checking environment variables directly.


# Tool version
TOOL_VERSION="1.0.0-20260109-000001"

# Version check
if [[ "${1:-}" == "--version" || "${1:-}" == "-v" ]]; then
    echo "workstream $TOOL_VERSION"
    exit 0
fi

if [ -z "$WORKSTREAM" ]; then
  echo "ERROR: \$WORKSTREAM environment variable not set" >&2
  exit 1
fi

echo "$WORKSTREAM"
